import 'package:flutter/material.dart';import 'package:flutter_bloc/flutter_bloc.dart';import 'package:google_fonts/google_fonts.dart';import 'package:lottie/lottie.dart';import '../../../utils/location_item.dart';import '../shops_location/shops_location.dart';import 'bloc/map_list_bloc.dart';class MapListPage extends StatelessWidget {  const MapListPage({super.key});  @override  Widget build(BuildContext context) {    final bloc = MapListBloc();    return BlocProvider.value(      value: bloc..add(GetAllMapListEvent()),      child: BlocConsumer<MapListBloc, MapListState>(        listener: (context, state) {},        builder: (context, state) {          return Builder(builder: (context) {            if (state is GetAllMapListState) {              return Scaffold(                appBar: AppBar(                  backgroundColor: const Color(0xFFfbc100),                  title: Text("Do'konlar",                      textAlign: TextAlign.start,                      style: GoogleFonts.poppins(                          fontWeight: FontWeight.w600, fontSize: 14)),                  actions: [                    InkWell(                      onTap: () {                        Navigator.pushNamed(context, 'mapLocAll');                      },                      child: const Padding(                        padding: EdgeInsets.symmetric(horizontal: 17),                        child: Icon(Icons.map_rounded, color: Colors.black),                      ),                    )                  ],                ),                body: SafeArea(                    child: Padding(                  padding: const EdgeInsets.all(12),                  child: ListView.builder(                    itemCount: state.data.data?.data?.length ?? 0,                    itemBuilder: (context, index) {                      print('length - ${state.data.data?.data?.length}');                      final actualIndex = (index == 0) ? index + 1 : index;                      return locationItem(                        state.data.data?.data?[actualIndex].name ?? '',                        state.data.data?.data?[actualIndex].openedStores?[0]                                .address ??                            '',                        state.data.data?.data?[actualIndex].openedStores?[0]                                .workTime ??                            '',                        () {                          Navigator.push(                              context,                              MaterialPageRoute(                                  builder: (context) => ShopsLocationPage(                                        data: state                                            .data                                            .data                                            ?.data?[actualIndex]                                            .openedStores?[0],                                      )));                        },                      );                    },                  ),                )),              );            } else if (state is LoadingState) {              return Scaffold(                body: SafeArea(                  child: Center(                    child: Lottie.asset(                      'assets/lottie/loading_circle.json',                      height: 150,                      width: 150,                    ),                  ),                ),              );            } else {              return const Scaffold(                body: SafeArea(                  child: Center(child: Text("Something went wrong!")),                ),              );            }          });        },      ),    );  }}