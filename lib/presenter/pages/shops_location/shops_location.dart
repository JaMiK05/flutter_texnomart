import 'dart:async';import 'dart:typed_data';import 'dart:ui';import 'package:flutter/material.dart';import 'package:flutter_svg/flutter_svg.dart';import 'package:google_fonts/google_fonts.dart';import 'package:yandex_mapkit/yandex_mapkit.dart';import '../../../data/source/models/location/shops_location.dart';class ShopsLocationPage extends StatefulWidget {  final OpenedStores? data;  const ShopsLocationPage({this.data, super.key});  @override  State<ShopsLocationPage> createState() => _ShopsLocationPageState();}class _ShopsLocationPageState extends State<ShopsLocationPage> {  final mapControllerCompleter = Completer<YandexMapController>();  final List<MapObject> mapObjects = [];  Future<void> _moveToCurrentLocation(double lat, double lon) async {    (await mapControllerCompleter.future).moveCamera(      animation: const MapAnimation(type: MapAnimationType.linear, duration: 1),      CameraUpdate.newCameraPosition(        CameraPosition(          target: Point(            latitude: lat,            longitude: lon,          ),          zoom: 15,        ),      ),    );  }  Future<Uint8List> svgToPng(String svgString, BuildContext context) async {    final pictureInfo =        await vg.loadPicture(SvgStringLoader(svgString), context);    final image = await pictureInfo.picture.toImage(100, 100);    final byteData = await image.toByteData(format: ImageByteFormat.png);    if (byteData == null) {      throw Exception('Unable to convert SVG to PNG');    }    final pngBytes = byteData.buffer.asUint8List();    return pngBytes;  }  @override  void initState() {    _moveToCurrentLocation(        double.parse(widget.data!.lat!), double.parse(widget.data!.long!));    super.initState();  }  @override  Widget build(BuildContext context) {    return Scaffold(        appBar: AppBar(            backgroundColor: const Color(0xFFfbc100),            title: Text("Do'kon",                textAlign: TextAlign.start,                style: GoogleFonts.poppins(                    fontWeight: FontWeight.w600, fontSize: 14))),        body: Column(children: [          Flexible(              flex: 5,              child: YandexMap(                onMapCreated: (controller) {                  mapControllerCompleter.complete(controller);                },                zoomGesturesEnabled: true,                mapObjects: [                  PlacemarkMapObject(                      mapId: MapObjectId(widget.data!.id.toString()),                      icon: PlacemarkIcon.single(PlacemarkIconStyle(                          scale: 1,                          image: BitmapDescriptor.fromAssetImage(                              'assets/icons/ic_locat.png'))),                      point: Point(                          latitude: double.parse(widget.data!.lat!),                          longitude: double.parse(widget.data!.long!)))                ],              )),          Flexible(              flex: 2,              child: Container(                width: MediaQuery.of(context).size.width,                decoration: BoxDecoration(                    color: Colors.white,                    borderRadius: const BorderRadius.only(                        topRight: Radius.circular(20),                        topLeft: Radius.circular(20)),                    boxShadow: [                      BoxShadow(                        color: Colors.grey.withOpacity(0.5),                        spreadRadius: 5,                        blurRadius: 7,                        offset:                            const Offset(0, 3), // changes position of shadow                      ),                    ]),                child: Column(                  crossAxisAlignment: CrossAxisAlignment.start,                  children: [                    Padding(                      padding: const EdgeInsets.only(top: 15, left: 15),                      child: Text(widget.data?.address ?? '',                          overflow: TextOverflow.ellipsis,                          maxLines: 2,                          style: GoogleFonts.poppins(                              fontSize: 16, fontWeight: FontWeight.w500)),                    ),                    Padding(                        padding: const EdgeInsets.only(top: 15, left: 15),                        child: Row(                          children: [                            const Icon(                              Icons.access_time_outlined,                              color: Colors.grey,                            ),                            const SizedBox(width: 10),                            Text(                              "Du-Ya(${widget.data!.workTime})",                              style: const TextStyle(color: Colors.grey),                            )                          ],                        )),                    Padding(                        padding: const EdgeInsets.only(top: 15, left: 15),                        child: Row(                          children: [                            const Icon(                              Icons.phone_outlined,                              color: Colors.grey,                            ),                            const SizedBox(width: 10),                            Text(                              "${widget.data!.phone}",                              style: const TextStyle(color: Colors.grey),                            )                          ],                        )),                    Padding(                        padding: const EdgeInsets.only(top: 15, left: 15),                        child: FittedBox(                          child: Container(                            decoration: BoxDecoration(                                border: Border.all(                                  color: Colors.grey,                                  width: 1,                                ),                                borderRadius: BorderRadius.circular(5)),                            child: Padding(                              padding: const EdgeInsets.all(10),                              child: Row(                                children: [                                  InkWell(                                    onTap: () {},                                    child: Image.asset(                                      'assets/icons/ic_send.png',                                      width: 20,                                      height: 20,                                    ),                                  ),                                  const SizedBox(width: 10),                                  Text(                                    "Yo'nalish",                                    style: GoogleFonts.poppins(                                        color: Colors.black.withAlpha(80),                                        fontWeight: FontWeight.w600),                                  )                                ],                              ),                            ),                          ),                        )),                  ],                ),              ))        ]));  }}